<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
  <script src="https://cdn.rawgit.com/matthewbryancurtis/aframe-star-system-component/db4f1030/index.js"></script>
  <script src="https://unpkg.com/aframe-supercraft-loader/dist/aframe-supercraft-loader.min.js"></script>
  <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
  <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.1.2/dist/aframe-extras.min.js"></script>
  <script src="https://unpkg.com/super-hands@3.0.0/dist/super-hands.min.js"></script>
  <script src="https://unpkg.com/aframe-log-component/dist/aframe-log-component.min.js"></script>
  <script src="/components/escape-pod.js"></script>
  <script src="/components/escape-pod-stage.js"></script>
  <script src="/components/control-knob.js"></script>
  <title>A-Frame Boilerplate</title>
</head>
<body>
  <a-scene loading-screen stats>
    <a-assets>
      <audio id="ambient-wario" src="/audio/ambient-wario.mp3"></audio>
      <img src="/images/speed-particle.png" id="speed-particle" />
      <a-asset-item id="control-knob-asset" src="/models/control-knob.obj"></a-asset-item>
      <a-asset-item id="helmet" src="/models/astronaut_helmet/scene.gltf"></a-asset-item>
      <a-asset-item id="monster" src="/models/monster.glb"></a-asset-item>

      <!-- Escape Pod Assets -->
      <a-asset-item id="escape-pod-asset" src="/models/escape-pod.obj"></a-asset-item>
      <img id="escape-pod-mat-base" src="/materials/escape-pod/metalgrid3_basecolor.png" />
      <img id="escape-pod-mat-metallic" src="/materials/escape-pod/metalgrid3_metallic.png" />
      <img id="escape-pod-mat-normal" src="/materials/escape-pod/metalgrid3_normal-dx.png" />
      <img id="escape-pod-mat-roughness" src="/materials/escape-pod/metalgrid3_roughness.png" />
      <a-mixin
        id="escape-pod-mix"
        material="color: #eeeeff;  src: #escape-pod-mat-base; repeat: 0.01 0.01; normalMap: #escape-pod-mat-normal; normalScale: 0.5 0.5; normalTextureRepeat: 100 100; metalnessMap: #escape-pod-mat-metallic; metalness: 0.6; metalnessTextureRepeat: 100 100 roughnessMap: #escape-pod-mat-roughness; roughness: 0.1; roughnessTextureRepeat: 100 100"
        obj-model="obj: #escape-pod-asset"
      >
      </a-mixin>
    </a-assets>

    <!-- Controllers -->

    <!-- Far Assets -->
    <a-sky id="starfield-background" material="color:#15001a" radius="10000"></a-sky>
    <a-entity id="starfield-stars" star-system="color: #b0b0ff; count:1000"></a-entity>\
    <a-entity id="ambient-light" light="type: point; intensity: 0.05"></a-entity>
    <a-sphere id="sun" light="type: hemisphere; color: #fdb813; intensity: 0.4;" position="0 0 -8000" material="emissive:#fdb813" geometry="radius:500" ></a-sphere>
    <a-sphere id="planet" position="0 0 1000" material="color:#50ff50; emissive:#50ff50" geometry="radius:300" ></a-sphere>


    <!-- Reference Frame -->
    <a-entity id="escape-pod-stage" position="0 0 -4" rotation="0 0 0" escape-pod-stage>

      <a-entity
        id="particle-system"
        position="0 5 0"
        particle-system="
          maxAge: 1;
          positionSpread: 50 50 50;
          type: 3;
          rotationAxis: x;
          rotationAngle: 0;
          rotationAngleSpread: 0;
          accelerationValue: 0 0.00001 0;
          accelerationSpread: 0 0.00001 0;
          velocityValue: 0 -100 0
          velocitySpread: 0 0.0001 0;
          dragValue: 0 0 0;
          dragSpread: 0 0.00001 0;
          dragRandomize: false;
          color: #ffffff;
          size: 0.2;
          direction: 1;
          duration: 5;
          enabled: true;
          particleCount: 500;
          randomize: false;
          opacity: 0.4;
          texture: /images/speed-particle.png;
          ">
      </a-entity>


      <!-- Escape Pod Wrapper -->
      <a-entity id="escape-pod-wrapper" escape-pod>
        <a-entity gltf-model="#monster" position="0 5 -6" scale="1 1 1" rotation="0 180 0" material="color: #282228"></a-entity>

        <a-entity id="escape-pod" mixin="escape-pod-mix"></a-entity>
        <a-entity id="control-knob" position="-0.4 1 -0.4" scale="1 1 1" rotation="0 -120 0" obj-model="obj: #control-knob-asset">
          <a-sphere id="control-knob-hitbox" control-knob-collider radius="0.05" position="0 0.5 -0.14" hoverable ></a-sphere>
        </a-entity>
        <a-entity id="camera" position="0 1.8 0.5" camera look-controls wasd-controls="fly: true">
            <!-- <a-entity gltf-model="#helmet" position="0 -0.15 0" scale="0.01 0.01 0.01" rotation="0 180 0"></a-entity> -->
            <!-- <a-log position="0 0 -3"></a-log> -->
        </a-entity>
      </a-entity>

      <a-entity sphere-collider="objects: #control-knob-hitbox;" super-hands hand-controls="left"></a-entity>
      <a-entity sphere-collider="objects: #control-knob-hitbox;" super-hands hand-controls="right"></a-entity>
    </a-entity>
    <!-- <a-sound src="#ambient-wario" autoplay="true" position="0 0 -2"></a-sound> -->
  </a-scene>
</body>
</html>
